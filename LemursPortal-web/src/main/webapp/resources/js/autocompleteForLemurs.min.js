var datas=[];function autocomplete(e,t){var n;function a(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),n>=e.length&&(n=0),n<0&&(n=e.length-1),e[n].classList.add("autocomplete-active")}function s(t){for(var n=document.getElementsByClassName("autocomplete-items"),a=0;a<n.length;a++)t!==n[a]&&t!==e&&n[a].parentNode.removeChild(n[a])}e.addEventListener("input",function(a){var l,i,u,o=this.value;if(s(),!o)return!1;if(n=-1,(l=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),l.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(l),o.length<3)$.get("metadata/list/"+t.substr(0,1).toUpperCase()+t.substr(1,t.length),{query:o},function(t){for(datas=t,u=0;u<datas.length;u++)t[u].value.substr(0,o.length).toUpperCase()===o.toUpperCase()&&((i=document.createElement("DIV")).innerHTML="<strong>"+t[u].value.substr(0,o.length)+"</strong>",i.innerHTML+=t[u].value.substr(o.length),i.innerHTML+="<input type='hidden' value='"+t[u].value+"'>",i.addEventListener("click",function(t){e.value=this.getElementsByTagName("input")[0].value,s()}),l.appendChild(i))},"JSON");else for(console.log(datas),u=0;u<datas.length;u++)datas[u].value.substr(0,o.length).toUpperCase()===o.toUpperCase()&&((i=document.createElement("DIV")).innerHTML="<strong>"+datas[u].value.substr(0,o.length)+"</strong>",i.innerHTML+=datas[u].value.substr(o.length),i.innerHTML+="<input type='hidden' value='"+datas[u].value+"'>",i.addEventListener("click",function(t){e.value=this.getElementsByTagName("input")[0].value,s()}),l.appendChild(i))}),e.addEventListener("keydown",function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40===e.keyCode?(n++,a(t)):38===e.keyCode?(n--,a(t)):13===e.keyCode&&(e.preventDefault(),n>-1&&t&&t[n].click())}),document.addEventListener("click",function(e){s(e.target)})}